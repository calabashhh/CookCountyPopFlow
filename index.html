<!DOCTYPE html>
<html>
    <head>
        <title>Lab 6</title>
        <style>
            html, body {
                height: 100%;
                margin: 0;
                padding: 0;
            }
            #map {
                height: 100%;
                width: 100%;
            }
        </style>
     
        <!-- Load your data first -->
        <script type="text/javascript" src="toppoptransf.js"></script>
        
        <!-- Leaflet CSS and JS -->
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
           integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
           crossorigin=""/>
        <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
           integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
           crossorigin=""></script>
                    
        <!-- Load animation tweening library -->
        <script src="https://unpkg.com/@tweenjs/tween.js@18.6.4/dist/tween.umd.js"></script>
        
        <!-- Load CanvasFlowMapLayer -->
        <script src="CanvasFlowmapLayer.js"></script>
    </head>
    <body>
        <div id="map"></div>
        <script type="text/javascript">
            // Make sure your data is defined before using it
            // If loading from toppoptransf.js, verify the variable name matches
            // Uncomment and modify this if needed:
            /*
            var data = {
                // Your flow data here
            };
            */
            
            var map = L.map('map', {
                center: [41, -87],
                zoom: 5
            });
            
            L.tileLayer('https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png', {
                attribution: 'Map tiles by Carto, under CC BY 3.0. Data by OpenStreetMap, under ODbL.',
                maxZoom: 11,
                minZoom: 5
            }).addTo(map);

            // Add error handling for the flow map layer
            try {
                var flowmapLayer = L.canvasFlowmapLayer(data, {
                    originAndDestinationFieldIds: {
                        originUniqueIdField: 'GEOID_B',
                        originGeometry: {
                            x: 'B_lon',
                            y: 'B_lat'
                        },
                        destinationUniqueIdField: 'GEOID_A',
                        destinationGeometry: {
                            x: 'A_lon',
                            y: 'A_lat'
                        }
                    },
                    pathDisplayMode: 'all',
                    animationStarted: true,
                    animationEasingFamily: 'Cubic',
                    animationEasingType: 'In',
                    animationDuration: 2000
                }).addTo(map);
            } catch (e) {
                console.error('Error creating flow map layer:', e);
            }
        </script>
   </body>
</html>index.html
